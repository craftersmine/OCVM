using System;
using System.Collections.Generic;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace craftersmine.OCVM.Core.Base
{
    public enum ColorDepth
    {
        OneBit = 1,
        Monochrome = OneBit,
        FourBit = 4,
        EightBit = 8
    }

    public class DisplayColorFormat
    {
        public ColorDepth Depth { get; set; }
    }

    public static class EightBitColorPalette
    {
        private static int[] palette = 
        {
            0x000000, 0x004000, 0x008000, 0x00c000, 0x00ff00, 0x000024, 0x004024, 0x008024, 0x00c024, 0x00ff24, 0x000049, 0x004049, 0x008049, 0x00c049, 0x00ff49, 0x00006d, 0x00406d, 0x00806d, 0x00c06d, 0x00ff6d, 0x000092, 0x004092, 0x008092, 0x00c092, 0x00ff92, 0x0000b6, 0x0040b6, 0x0080b6, 0x00c0b6, 0x00ffb6, 0x0000db, 0x0040db, 0x0080db, 0x00c0db, 0x00ffdb, 0x0000ff, 0x0040ff, 0x0080ff, 0x00c0ff, 0x00ffff,
            0x330000, 0x334000, 0x338000, 0x33c000, 0x33ff00, 0x330024, 0x334024, 0x338024, 0x33c024, 0x33ff24, 0x330049, 0x334049, 0x338049, 0x33c049, 0x33ff49, 0x33006d, 0x33406d, 0x33806d, 0x33c06d, 0x33ff6d, 0x330092, 0x334092, 0x338092, 0x33c092, 0x33ff92, 0x3300b6, 0x3340b6, 0x3380b6, 0x33c0b6, 0x33ffb6, 0x3300db, 0x3340db, 0x3380db, 0x33c0db, 0x33ffdb, 0x3300ff, 0x3340ff, 0x3380ff, 0x33c0ff, 0x33ffff,
            0x660000, 0x664000, 0x668000, 0x66c000, 0x66ff00, 0x660024, 0x664024, 0x668024, 0x66c024, 0x66ff24, 0x660049, 0x664049, 0x668049, 0x66c049, 0x66ff49, 0x66006d, 0x66406d, 0x66806d, 0x66c06d, 0x66ff6d, 0x660092, 0x664092, 0x668092, 0x66c092, 0x66ff92, 0x6600b6, 0x6640b6, 0x6680b6, 0x66c0b6, 0x66ffb6, 0x6600db, 0x6640db, 0x6680db, 0x66c0db, 0x66ffdb, 0x6600ff, 0x6640ff, 0x6680ff, 0x66c0ff, 0x66ffff,
            0x990000, 0x994000, 0x998000, 0x99c000, 0x99ff00, 0x990024, 0x994024, 0x998024, 0x99c024, 0x99ff24, 0x990049, 0x994049, 0x998049, 0x99c049, 0x99ff49, 0x99006d, 0x99406d, 0x99806d, 0x99c06d, 0x99ff6d, 0x990092, 0x994092, 0x998092, 0x99c092, 0x99ff92, 0x9900b6, 0x9940b6, 0x9980b6, 0x99c0b6, 0x99ffb6, 0x9900db, 0x9940db, 0x9980db, 0x99c0db, 0x99ffdb, 0x9900ff, 0x9940ff, 0x9980ff, 0x99c0ff, 0x99ffff,
            0xcc0000, 0xcc4000, 0xcc8000, 0xccc000, 0xccff00, 0xcc0024, 0xcc4024, 0xcc8024, 0xccc024, 0xccff24, 0xcc0049, 0xcc4049, 0xcc8049, 0xccc049, 0xccff49, 0xcc006d, 0xcc406d, 0xcc806d, 0xccc06d, 0xccff6d, 0xcc0092, 0xcc4092, 0xcc8092, 0xccc092, 0xccff92, 0xcc00b6, 0xcc40b6, 0xcc80b6, 0xccc0b6, 0xccffb6, 0xcc00db, 0xcc40db, 0xcc80db, 0xccc0db, 0xccffdb, 0xcc00ff, 0xcc40ff, 0xcc80ff, 0xccc0ff, 0xccffff,
            0xff0000, 0xff4000, 0xff8000, 0xffc000, 0xffff00, 0xff0024, 0xff4024, 0xff8024, 0xffc024, 0xffff24, 0xff0049, 0xff4049, 0xff8049, 0xffc049, 0xffff49, 0xff006d, 0xff406d, 0xff806d, 0xffc06d, 0xffff6d, 0xff0092, 0xff4092, 0xff8092, 0xffc092, 0xffff92, 0xff00b6, 0xff40b6, 0xff80b6, 0xffc0b6, 0xffffb6, 0xff00db, 0xff40db, 0xff80db, 0xffc0db, 0xffffdb, 0xff00ff, 0xff40ff, 0xff80ff, 0xffc0ff, 0xffffff,
            0x0f0f0f, 0x1e1e1e, 0x2d2d2d, 0x3c3c3c, 0x4b4b4b, 0x5a5a5a, 0x696969, 0x787878, 0x878787, 0x969696, 0xa5a5a5, 0xb4b4b4, 0xc3c3c3, 0xd2d2d2, 0xe1e1e1, 0xf0f0f0
        };

        private static int[] editablePalette = palette;

        public static int GetIndex(int value)
        {
            for (int i = 0; i < editablePalette.Length; i++)
            {
                if (palette[i] == value)
                    return palette[i];
                else continue;
            }
            return -1;
        }

        public static int GetColor(int index)
        {
            if (index >= 0 || index < 256)
                return editablePalette[index];
            else return -1;
        }

        public static void SetColor(int index, int color)
        {
            editablePalette[index] = color;
        }

        public static void ResetPalette()
        {
            editablePalette = palette;
        }
    }
}
